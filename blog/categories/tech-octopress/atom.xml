<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Tech-octopress | 丘海东]]></title>
  <link href="https://qiuhaidong.github.io/blog/categories/tech-octopress/atom.xml" rel="self"/>
  <link href="https://qiuhaidong.github.io/"/>
  <updated>2022-04-05T22:39:17+08:00</updated>
  <id>https://qiuhaidong.github.io/</id>
  <author>
    <name><![CDATA[丘海东]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Error Running __rvm_make -j4]]></title>
    <link href="https://qiuhaidong.github.io/blog/2022/04/05/error-running-rvm-make-j4/"/>
    <updated>2022-04-05T22:22:58+08:00</updated>
    <id>https://qiuhaidong.github.io/blog/2022/04/05/error-running-rvm-make-j4</id>
    <content type="html"><![CDATA[<pre><code>rvm install 2.6.9
</code></pre>

<p>提示错误：<br/>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Error running &lsquo;__rvm_make -j4&rsquo;,
</span><span class='line'>please read /home/dong/.rvm/log/1649165570_ruby-2.6.9/make.log&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;There has been an error while running make. Halting the installation.
</span><span class='line'>&hellip;&hellip;</span></code></pre></td></tr></table></div></figure></p>

<p><strong>解决：</strong></p>

<pre><code>rvm pkg install openssl
rvm remove 2.6.9
rvm install 2.6.9 -C --with-openssl-dir=$HOME/.rvm/usr
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Ubuntu 22.04安装Octopress 2.0]]></title>
    <link href="https://qiuhaidong.github.io/blog/2022/04/05/octopress2-on-ubuntu-22-dot-04/"/>
    <updated>2022-04-05T22:03:16+08:00</updated>
    <id>https://qiuhaidong.github.io/blog/2022/04/05/octopress2-on-ubuntu-22-dot-04</id>
    <content type="html"><![CDATA[<pre><code>git --version
sudo apt install git
</code></pre>

<p>然后配置git，把之前的octopress-haydnyau和ssh2-ssh3文件夹和.gitconfig文件复制到主目录，改ssh文件夹名，<code>ssh -T git@github.com</code>，ok<br/>
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>python2 &ndash;version
</span><span class='line'>sudo apt install python2&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ruby &ndash;version
</span><span class='line'>&lt;code&gt;
</span><span class='line'>没有  
</span><span class='line'>到rvm官网  
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>gpg2 &ndash;recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB
</span><span class='line'>&lt;code&gt;
</span><span class='line'>提示：  
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>Command &lsquo;gpg2&rsquo; not found, but can be installed with:
</span><span class='line'>sudo apt install gnupg2
</span><span class='line'>&lt;code&gt;
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>sudo apt install gnupg2
</span><span class='line'>gpg2 &ndash;recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;curl -sSL &lt;a href="https://get.rvm.io"&gt;https://get.rvm.io&lt;/a&gt; | bash -s stable
</span><span class='line'>&lt;code&gt;
</span><span class='line'>提示：  
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>Command &lsquo;curl&rsquo; not found, but can be installed with:
</span><span class='line'>sudo apt install curl
</span><span class='line'>&lt;code&gt;
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>sudo apt install curl
</span><span class='line'>curl -sSL &lt;a href="https://get.rvm.io"&gt;https://get.rvm.io&lt;/a&gt; | bash -s stable
</span><span class='line'>&lt;code&gt;
</span><span class='line'>提示：  
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>curl: (7) Failed to connect to raw.githubusercontent.com port 443 after 28 ms: 拒绝连接
</span><span class='line'>&lt;code&gt;
</span><span class='line'>解决：  
</span><span class='line'>[Failed to connect to raw.githubusercontent.com](https://blog.csdn.net/u014375643/article/details/115826506)  
</span><span class='line'>到这个网址：`https://www.ipaddress.com/`，输入：`raw.githubusercontent.com`，查询，得到IP地址，选择其中一个或多个，修改本地HOSTS：Ubuntu下打开/etc/hosts，添加 IP地址：`185.199.108.133 raw.githubusercontent.com`，重试，不行就重启再试。  
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>curl -sSL &lt;a href="https://get.rvm.io"&gt;https://get.rvm.io&lt;/a&gt; | bash -s stable
</span><span class='line'>&lt;code&gt;
</span><span class='line'>提示：  
</span><span class='line'>&lt;/code&gt;&lt;br/&gt;
</span><span class='line'>* To start using RVM you need to run &lt;code&gt;source /home/dong/.rvm/scripts/rvm&lt;/code&gt;
</span><span class='line'>    in all your open shell windows, in rare cases you need to reopen all shell windows.
</span><span class='line'>Thanks for installing RVM
</span><span class='line'>&lt;code&gt;
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>source /home/dong/.rvm/scripts/rvm
</span><span class='line'>&lt;code&gt;
</span><span class='line'>重启命令行  
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>rvm &ndash;version
</span><span class='line'>rvm install 2.6.9
</span><span class='line'>&lt;code&gt;
</span><span class='line'>提示错误：  
</span><span class='line'>&lt;/code&gt;
</span><span class='line'>Error running &lsquo;__rvm_make -j4&rsquo;,
</span><span class='line'>please read /home/dong/.rvm/log/1649165570_ruby-2.6.9/make.log&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;There has been an error while running make. Halting the installation.
</span><span class='line'>&hellip;&hellip;</span></code></pre></td></tr></table></div></figure></p>

<p><strong>解决：</strong></p>

<pre><code>rvm pkg install openssl
rvm remove 2.6.9
rvm install 2.6.9 -C --with-openssl-dir=$HOME/.rvm/usr
</code></pre>

<pre><code>ruby --version
rvm use 2.6.9 --default

gem install bundler
bundle install
</code></pre>

<p><a href="https://qiuhaidong.github.io/blog/2022/03/26/you-can-use-the-sass-convert-command-to-automatically-fix-most-cases/">更改sass-convert</a></p>

<pre><code>rake generate
......
</code></pre>

<p>之后的常规操作。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Kex_exchange_identification: Read: Connection Reset by Peer]]></title>
    <link href="https://qiuhaidong.github.io/blog/2022/03/20/kex-exchange-identification-read-connection-reset-by-peer/"/>
    <updated>2022-03-20T10:32:48+08:00</updated>
    <id>https://qiuhaidong.github.io/blog/2022/03/20/kex-exchange-identification-read-connection-reset-by-peer</id>
    <content type="html"><![CDATA[<p>有時會出現標題的錯誤，ssh無法連接服務器，試過網上的幾種方法都不行，其實是國內網絡經常封鎖github，過段時間就好了。<br/>
update:</p>

<h4>1. 收到邮件：</h4>

<p>GitGuardian检测到您的GitHub帐户中暴露了以下OpenSSH私钥。<br/>
GitGuardian has detected the following OpenSSH Private Key exposed within your GitHub account.<br/>
新建key即可。</p>

<h4>2. 如果把SSH key上传到仓库，会提示安全验证：</h4>

<pre><code>ERROR: We're doing an SSH key audit.
Reason: unverified automatically (private key found in a public repository)
Please visit https://github.com/settings/keys/********
to approve this key so we know it's safe.

Fingerprint:
SHA256:***********************************************

fatal: 无法读取远程仓库。

请确认您有正确的访问权限并且仓库存在。
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Back to Top返回頂部按鈕]]></title>
    <link href="https://qiuhaidong.github.io/blog/2022/02/27/back-to-top/"/>
    <updated>2022-02-27T18:52:33+08:00</updated>
    <id>https://qiuhaidong.github.io/blog/2022/02/27/back-to-top</id>
    <content type="html"><![CDATA[<p><a href="https://www.jianshu.com/p/fe0e089a985c">教程1</a><br/>
<a href="https://www.cnblogs.com/biglucky/p/4148867.html">教程2</a></p>

<h3>实现返回按钮功能</h3>

<p>首先创建<code>source/javascripts/top.js</code>，添加如下代码实现滑动返回顶部效果:</p>

<pre><code class="javascript">function goTop(acceleration, time)
{
        acceleration = acceleration || 1;  //加速度
        time = time || 16;  //时间间隔 (毫秒)

        var x1 = 0;
        var y1 = 0;
        var x2 = 0;
        var y2 = 0;
        var x3 = 0;
        var y3 = 0;

        if (document.documentElement)
        {
                x1 = document.documentElement.scrollLeft || 0;
                y1 = document.documentElement.scrollTop || 0;
        }
        if (document.body)
        {
                x2 = document.body.scrollLeft || 0;
                y2 = document.body.scrollTop || 0;
        }
        var x3 = window.scrollX || 0;
        var y3 = window.scrollY || 0;

        // 滚动条到页面顶部的水平距离
        var x = Math.max(x1, Math.max(x2, x3));
        // 滚动条到页面顶部的垂直距离
        var y = Math.max(y1, Math.max(y2, y3));

        // 滚动距离 = 目前距离 / 速度, 因为距离原来越小, 速度是大于 1 的数, 所以滚动距离会越来越小
        var speed = 1 + acceleration;
        window.scrollTo(Math.floor(x / speed), Math.floor(y / speed));

        // 如果距离不为零, 继续调用迭代本函数
        if(x &gt; 0 || y &gt; 0)
        {
                var invokeFunction = "goTop(" + acceleration + ", " + time + ")";
                window.setTimeout(invokeFunction, time);
        }
}
</code></pre>

<h3>自定义返回按钮格式</h3>

<p>创建<code>source/_includes/custom/totop.html</code>，设置返回顶部按钮样式和位置<br/>
其中的<code>width、height、right、bottom</code>为图片在网页中的位置，可根据图片大小自行设定，示例代码如下：</p>

<p>``` html</p>

<!--返回顶部开始-->


<div id="full" style="width:30px; height:30px; position:fixed; right:13px; bottom:13px; z-index:100; text-align:center; background-color:transparent; cursor:pointer;">
<a href="#" onclick="goTop();return false;"><img src="https://qiuhaidong.github.io/images/top.png" border=0 alt="返回顶部"></a>
</div>


<script src="https://qiuhaidong.github.io/javascripts/top.js" type="text/javascript"></script>


<!--返回顶部结束-->


<pre><code>
### 选择按钮图片
找到自己喜爱的返回按钮图片，命名为`top.png`后添加到`source/images`目录中（或修改`totop.html`中图片的路径），文件名和`totop.html`中的一致就可以了，可以自己命名。  

然后把`totop.html` 引入到文件中，考虑到进到具体每一篇blog里面也有这个功能，我们把这个文件在`foot.html`中引入，修改:`octopress/source/_includes/custom/footer.html`，添加一行：  
![octopress/source/_includes/custom/footer.html](http://r.photo.store.qq.com/psc?/V53xBhKC4JFvE03uTNAL1QWxNF3K6JJT/TmEUgtj9EK6.7V8ajmQrEMHNMi9RBV8SPCiQjrpiIVqTO0oBBa1zGSTDwX1cxXY1I0xQDhEyJNc9d2jqFOe5QAet0C9GvAgWzpRjxvDQ7Sc!/r)  
</code></pre>

<p>  {\% include custom/totop.html \%}  //记得去除两个\号
```</p>

<p>bug提醒：如果post文件中有上面这一行代码（没有\号），blog网站首页和这篇博文页，会有返回按钮图片错误</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[添加tags，導航欄，側邊欄]]></title>
    <link href="https://qiuhaidong.github.io/blog/2022/02/27/add-tags/"/>
    <updated>2022-02-27T16:34:34+08:00</updated>
    <id>https://qiuhaidong.github.io/blog/2022/02/27/add-tags</id>
    <content type="html"><![CDATA[<p><a href="http://www.aobosir.com/blog/2016/10/12/octopress-build-static-blog-site-add-tag-cloud-to-site-sidebar/">参考1</a></p>

<h3>下载</h3>

<p>首先到 <a href="https://github.com/robbyedwards/octopress-tag-pages">https://github.com/robbyedwards/octopress-tag-pages</a> 和 <a href="https://github.com/robbyedwards/octopress-tag-cloud">https://github.com/robbyedwards/octopress-tag-cloud</a> 下载这两个项目的代码。</p>

<h3>octopress-tag-pages</h3>

<p>把里面的文件复制到相应位置，之前已有的文件，看代码，把需要的代码加上去，<code>.md</code>文件先不用管</p>

<h3>octopress-tag-cloud</h3>

<p><strong>1 .</strong> 将 <code>octopress-tag-cloud\plugins</code>  路径里面的 <code>tag_cloud.rb</code>  文件复制到 <code>octopress\plugins\</code>  文件夹里面。</p>

<p><strong>2 .</strong> 将下面的代码复制到 <code>octopress\source\_includes\custom\asides\tags.html</code>。（这个文件需要自己新建。）
<strong>注意：</strong> 去掉 <code>%</code> 前面的反斜杠<code>\</code>。</p>

<pre><code class="html">&lt;section&gt;
  &lt;h1&gt;Tags&lt;/h1&gt;
  &lt;ul id="tag-cloud"&gt;
    {\% tag_cloud font-size: 120-160%, limit: 20 \%}
  &lt;/ul&gt;
&lt;/section&gt;
</code></pre>

<p>解释：</p>

<p><code>tag_cloud</code> 的参数中， <code>font-size</code> 指定 <code>tag</code> 的大小范围；<code>limit</code> 限定 <code>20</code> 个 <code>tag</code> 。</p>

<p><strong>3 .</strong> 在 <code>octopress\_config.yml</code> 中的 <code>default_asides</code> 中添加 <code>custom/asides/tags.html</code>，注意相应的位置。
<code>
default_asides: [custom/asides/tags.html, .....]
</code></p>

<p>博文写标签：</p>

<pre><code>tags: [tag1, tag2, tag3]
</code></pre>

<p> <code>rake generate</code> 出现问题：</p>

<p><img src="http://r.photo.store.qq.com/psc?/V53xBhKC4JFvE03uTNAL1QWxNF3K6JJT/TmEUgtj9EK6.7V8ajmQrEBdI0C.SIjWT7xp6kxk44HtNtPC263DeEkNHJxhmSxZADk0hrbMx8wpKHzK5e5i3chf0lcEBpbc6HvuMur2Yj2M!/r" alt="Alt text" /></p>

<pre><code>  Liquid Exception: comparison of Array with Array failed in _layouts/page.html
</code></pre>

<h3>解决</h3>

<p><code>octopress\plugins\tag_cloud.rb</code> 第74行:</p>

<pre><code class="ruby">if @limit &gt; 0 and @sort != 'rand'
    # sort the tag pairs by frequency in descending order
    weighted.sort! { |a,b| b[1] &lt;=&gt; a[1] }
    # then slice off the top @limit tag pairs
    weighted = weighted[0,@limit]
end
</code></pre>

<p><code>weighted = weighted[0,@limit]</code> 应该是取指定数目的标签。如果标签数量少于 <code>@limit</code> ，会报错。</p>

<p>修改第74行为:</p>

<pre><code class="ruby">      if @limit &gt; 0 and @sort != 'rand' and @limit &lt; weighted.length
</code></pre>

<p>修改第95行为:</p>

<pre><code class="ruby">        if @limit &gt; 0 and @limit &lt; weighted.length
</code></pre>

<p><code>rake generate</code> ，不再出现错误</p>

<p>出现另一警告：</p>

<p><img src="http://r.photo.store.qq.com/psc?/V53xBhKC4JFvE03uTNAL1QWxNF3K6JJT/TmEUgtj9EK6.7V8ajmQrEEVv9L5qdjCrWDNsdaae1gecrl4Dk5DfGovwzPBz4NGxy2YEcsjFTGZk9HPnZ4pdOW3MLz5JmXZtaeKeBaKa9YY!/r" alt="Alt text" /></p>

<p><code>rake preview</code> ，标签云成功添加:</p>

<p><img src="http://r.photo.store.qq.com/psc?/V53xBhKC4JFvE03uTNAL1QWxNF3K6JJT/TmEUgtj9EK6.7V8ajmQrEMkifW2gJW9D*DOdH8mhfQXdNtXOdqE9gQNJ5cLGRw3mEOzZJ.eR*6x07lmQqrmSHEFlbcBrFrU*4FcTQePqHV0!/r" alt="Alt text" /></p>

<h3>解决 <code>Build Warning: Layout 'nil' requested in tags/标签名/atom.xml does not exist.</code> 警告问题</h3>

<p>将 <code>octopress\source\_includes\custom\tag_feed.xml</code> 文件里面 <code>nil</code> 改为 <code>null</code> ：</p>

<pre><code>---
layout: null
---
</code></pre>

<h2>搞定</h2>
]]></content>
  </entry>
  
</feed>
